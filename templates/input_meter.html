<html>

<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Meteran cust|PLNPay</title>
  <!-- bootstrap cdn -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- bootstrap icons cdn -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
  <!-- box icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
  <!-- CSS -->
  <link rel="stylesheet" href="{{url_for('static', filename='css/sidebar_navbar.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='css/input_meter.css')}}">
  <!-- font import -->
  <link rel="stylesheet" href="{{url_for('static',filename='css/font_import.css')}}">
</head>

<body id="body-pd">
  <!-- header -->
  <header class="header" id="header">
    <div class="header_toggle">
      <i class='bx bx-menu' id="header-toggle"></i>
    </div>
    <div class="profile">
      <h4 id="text-profile" class="text-nowrap poppins-bold"> John Doe</h4>
    </div>
  </header>
  <!-- sidebar -->
  {% include '/rangka/sidebar.html' %}

  <!-- input meter -->
  <main id="input_meter">
    <h1>Pembayaran Meteran</h1>
    <form id="form-input" method="post">
      <label for="nama_pelanggan">Nama Pelanggan:</label>
      <input type="text" id="nama_pelanggan" name="nama_pelanggan"><br><br>
      <label for="bulan">Bulan:</label>
      <select id="bulan" name="bulan">
        <option value="Januari">Januari</option>
        <option value="Februari">Februari</option>
        <option value="Maret">Maret</option>
        <option value="April">April</option>
        <option value="Mei">Mei</option>
        <option value="Juni">Juni</option>
        <option value="Juli">Juli</option>
        <option value="Agustus">Agustus</option>
        <option value="September">September</option>
        <option value="Oktober">Oktober</option>
        <option value="November">November</option>
        <option value="Desember">Desember</option>
      </select><br><br>
      <label for="tahun">Tahun:</label>
      <input type="number" id="tahun" name="tahun"><br><br>
      <label for="tanggal_cek">Tanggal Cek:</label>
      <input type="date" id="tanggal_cek" name="tanggal_cek"><br><br>
      <label for="meteran_awal">Meteran Awal:</label>
      <input type="text" id="meteran_awal" name="meteran_awal"><br><br>
      <label for="Meteran_akhir">Tanggal Akhir:</label>
      <input type="text" id="Meteran_akhir" name="Meteran_akhir"><br><br>
      <button type="submit" id="btn-simpan">Simpan</button>
    </form>
    <table id="table-data">
      <thead>
        <tr>
          <th>Nama Pelanggan</th>
          <th>Bulan</th>
          <th>Tahun</th>
          <th>Tanggal Cek</th>
          <th>Meteran Awal</th>
          <th>Meteran Akhir</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="tbody-data">
        <!-- data akan ditampilkan disini -->
      </tbody>
    </table>
  </main>
</body>
<!-- cdn bs js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<!-- jquery cdn -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- import js -->
<script src="{{url_for('static',filename='js/navbar_sidebar.js')}}"></script>
<script src="{{url_for('static',filename='js/index.js')}}"></script>
<script>
  // fungsi untuk menampilkan data
  function tampilkanData() {
    const tbody = document.getElementById('tbody-data');
    tbody.innerHTML = '';
    data.forEach((item, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${item.nama_pelanggan}</td>
        <td>${item.bulan}</td>
        <td>${item.tahun}</td>
        <td>${item.tanggal_cek}</td>
        <td>${item.meteran_awal}</td>
        <td>${item.meteran_akhir}</td>
        <td>
          <button class="btn-hapus" data-index="${index}">Hapus</button>
        </td>
      `;
      tbody.appendChild(row);
    });
  }

  // fungsi untuk menambahkan data
  function tambahkanData() {
    const namaPelanggan = document.getElementById('nama_pelanggan').value;
    const bulan = document.getElementById('bulan').value;
    const tahun = document.getElementById('tahun').value;
    const tanggalCek = document.getElementById('tanggal_cek').value;
    const meteranAwal = document.getElementById('meteran_awal').value;
    const meteranAkhir = document.getElementById('meteran_akhir').value;

    data.push({
      nama_pelanggan: namaPelanggan,
      bulan: bulan,
      tahun: tahun,
      tanggal_cek: tanggalCek,
      meteran_awal: meteranAwal,
      meteran_akhir: meteranAkhir
    });

    tampilkanData();
  }

  // fungsi untuk menghapus data
  function hapusData(index) {
    data.splice(index, 1);
    tampilkanData();
  }

  // event listener untuk tombol simpan
  document.getElementById('btn-simpan').addEventListener('click', tambahkanData);

  // event listener untuk tombol edit
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('btn-edit')) {
      const index = e.target.dataset.index;
      editData(index);
    }
  });

  // event listener untuk tombol hapus
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('btn-hapus')) {
      const index = e.target.dataset.index;
      hapusData(index);
    }
  });
</script>

</html>